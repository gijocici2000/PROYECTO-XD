{% extends 'index.html' %}

{% block main %}
<div class="container mt-4">
  <h2>Detalle Compra: {{ compra.numero_factura }}</h2>

  <p><strong>Proveedor:</strong> {{ compra.proveedor.nombre }}</p>
  <p><strong>Fecha:</strong> {{ compra.fecha_compra|date:"d/m/Y" }}</p>
  <p><strong>Subtotal:</strong> ${{ compra.subtotal }}</p>
  <p><strong>IVA:</strong> ${{ compra.iva }}</p>
  <p><strong>Total:</strong> ${{ compra.total }}</p>

  <h4>Productos</h4>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Producto</th>
        <th>Cantidad</th>
        <th>Precio Unitario</th>
        <th>IVA %</th>
      </tr>
    </thead>
    <tbody>
      {% for detalle in detalles %}
        <tr>
          <td>{{ detalle.producto.nombre }}</td>
          <td>{{ detalle.cantidad }}</td>
          <td>${{ detalle.precio_unitario }}</td>
          <td>{{ detalle.iva_aplicado }}%</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

  <a href="{% url 'exportar_pdf_compra' compra.id %}" class="btn btn-primary">Exportar PDF</a>
  <a href="{% url 'crear_compra' %}" class="btn btn-secondary">Nueva Compra</a>
</div>
{% endblock %}
