{% extends "index.html" %}


{% block main %}

<div class="container-form">
   <h2><b>Crear Factura</b></h2> <!-- Area Chart -->
    
           
            <div class="card-body">
                <form method="post" action="{% url 'crear_factura' %}"class="Form">
                    {% csrf_token %}
                    {{ facturaform }}

                   
                        
                      {{ formset.management_form }}
                    {% for form in formset %}  
                    <div class="table">
                       
                    <table class="table">
                         
                            <tr>
                                <td style="border: 0; padding: 0 0.5em 0 0; width: 80%">
                                    <label class="form-label" for="factura_detalle_producto">Producto</label>
                                    {{form.producto}}
                                </td>
                                
                                <td style="border: 0; padding: 0Enviar 0 0 0.5em;">
                                    <label class="form-label" for="factura_detalle_cantidad">cantidad</label>
                                    {{form.cantidad}}
                                </td>
                            </tr>
                        </table>
                    </div>
                    {% endfor %}
                    <div class="save-content">
             <input class="btn btn-outline-warning add-form-row" style="margin: 0 1em 0 1em; width: 40%"
                            type="button" value="aÃ±adir producto" id="add_more">
            <input type="submit" class="btn btn-primary" value="Guardar factura">
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block custom_js %}
<script>
    function cloneMore(selector, type) {
        var newElement = $(selector).clone(true);
        var total = $('#id_' + type + '-TOTAL_FORMS').val();
        newElement.find(':input').each(function () {
            var name = $(this).attr('name').replace('-' + (total - 1) + '-', '-' + total + '-');
            var id = 'id_' + name;
            $(this).attr({ 'name': name, 'id': id }).val('').removeAttr('checked');
        });
        newElement.find('label').each(function () {
            var newFor = $(this).attr('for').replace('-' + (total - 1) + '-', '-' + total + '-');
            $(this).attr('for', newFor);
        });
        total++;
        $('#id_' + type + '-TOTAL_FORMS').val(total);
        $(selector).after(newElement);
    }

    $('#add_more').click(function () {
        cloneMore('div.table:last', 'formset');
    });
</script>
{% endblock %}